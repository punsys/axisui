// =============================================================================
// PROGRESS - AxisUI Framework Comprehensive Progress Components
// Direct color naming with comprehensive variants and animations
// No ax- class prefixes, container scoped
// =============================================================================

@use '../abstracts/variables' as *;
@use '../abstracts/functions' as *;
@use '../abstracts/mixins' as *;

.axis-ui {
  // =============================================================================
  // BASE PROGRESS STRUCTURE
  // =============================================================================
  
  .progress {
    position: relative;
    width: 100%;
    height: ax-spacing(2);
    background-color: $ax-gray-light;
    border-radius: $ax-radius-full;
    overflow: hidden;
    border: 1px solid rgba($ax-gray, 0.2);
    
    // Progress bar
    .progress-bar {
      height: 100%;
      background-color: $ax-blue;
      border-radius: $ax-radius-full;
      transition: width $ax-transition-base;
      position: relative;
      overflow: hidden;
      
      // Animated shine effect
      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shine 2s infinite;
      }
    }
  }

  // =============================================================================
  // PROGRESS SIZES
  // =============================================================================
  
  .progress.progress-xs {
    height: ax-spacing(1);
  }

  .progress.progress-sm {
    height: ax-spacing(1.5);
  }

  .progress.progress-lg {
    height: ax-spacing(3);
  }

  .progress.progress-xl {
    height: ax-spacing(4);
  }

  // =============================================================================
  // UTILITY PROGRESS SIZE VARIANTS - Standalone sizing utilities
  // =============================================================================
  
  .progress-xs {
    height: 0.25rem !important;
    border-radius: 0.125rem !important;
  }

  .progress-sm {
    height: 0.375rem !important;
    border-radius: 0.1875rem !important;
  }

  .progress-md {
    height: 0.5rem !important;
    border-radius: 0.25rem !important;
  }

  .progress-lg {
    height: 0.75rem !important;
    border-radius: 0.375rem !important;
  }

  .progress-xl {
    height: 1rem !important;
    border-radius: 0.5rem !important;
  }

  // =============================================================================
  // PROGRESS WITH LABELS
  // =============================================================================
  
  .progress-with-label {
    .progress-info {
      @include ax-flex-between;
      margin-bottom: ax-spacing(1);
      font-size: $ax-text-sm;
      
      .progress-title {
        font-weight: $ax-font-medium;
        color: $ax-gray-dark;
      }
      
      .progress-value {
        font-weight: $ax-font-medium;
        color: $ax-blue;
      }
    }
  }

  // =============================================================================
  // COLOR VARIANTS
  // =============================================================================

  .progress.progress-blue .progress-bar {
    background-color: $ax-blue;
    
    .progress-label .progress-value {
      color: $ax-blue;
    }
  }

  .progress.progress-red .progress-bar {
    background-color: $ax-red;
    
    .progress-label .progress-value {
      color: $ax-red;
    }
  }

  .progress.progress-green .progress-bar {
    background-color: $ax-green;
    
    .progress-label .progress-value {
      color: $ax-green;
    }
  }

  .progress.progress-yellow .progress-bar {
    background-color: $ax-yellow;
    
    .progress-label .progress-value {
      color: $ax-yellow;
    }
  }

  .progress.progress-purple .progress-bar {
    background-color: $ax-purple;
    
    .progress-label .progress-value {
      color: $ax-purple;
    }
  }

  .progress.progress-pink .progress-bar {
    background-color: $ax-pink;
    
    .progress-label .progress-value {
      color: $ax-pink;
    }
  }

  .progress.progress-orange .progress-bar {
    background-color: $ax-orange;
    
    .progress-label .progress-value {
      color: $ax-orange;
    }
  }

  .progress.progress-teal .progress-bar {
    background-color: $ax-teal;
    
    .progress-label .progress-value {
      color: $ax-teal;
    }
  }

  .progress.progress-cyan .progress-bar {
    background-color: $ax-cyan;
    
    .progress-label .progress-value {
      color: $ax-cyan;
    }
  }

  .progress.progress-gray .progress-bar {
    background-color: $ax-gray;
    
    .progress-label .progress-value {
      color: $ax-gray-dark;
    }
  }

  // =============================================================================
  // GRADIENT VARIANTS
  // =============================================================================
  
  .progress.progress-gradient {
    &.progress-blue .progress-bar {
      background: linear-gradient(90deg, $ax-blue-light 0%, $ax-blue 50%, $ax-blue-dark 100%);
    }

    &.progress-red .progress-bar {
      background: linear-gradient(90deg, $ax-red-light 0%, $ax-red 50%, $ax-red-dark 100%);
    }

    &.progress-green .progress-bar {
      background: linear-gradient(90deg, $ax-green-light 0%, $ax-green 50%, $ax-green-dark 100%);
    }

    &.progress-purple .progress-bar {
      background: linear-gradient(90deg, $ax-purple-light 0%, $ax-purple 50%, $ax-purple-dark 100%);
    }
  }

  .progress.progress-rainbow .progress-bar {
    background: linear-gradient(90deg,
      $ax-red 0%,
      $ax-orange 16.66%,
      $ax-yellow 33.33%,
      $ax-green 50%,
      $ax-cyan 66.66%,
      $ax-blue 83.33%,
      $ax-purple 100%
    );
  }

  // =============================================================================
  // STRIPED PATTERNS
  // =============================================================================
  
  .progress.progress-striped .progress-bar {
    background-image: linear-gradient(
      45deg,
      rgba(255, 255, 255, 0.15) 25%,
      transparent 25%,
      transparent 50%,
      rgba(255, 255, 255, 0.15) 50%,
      rgba(255, 255, 255, 0.15) 75%,
      transparent 75%,
      transparent
    );
    background-size: ax-spacing(4) ax-spacing(4);
  }

  .progress.progress-striped.progress-animated .progress-bar {
    animation: progress-stripes 1s linear infinite;
  }

  // =============================================================================
  // SPECIAL VARIANTS
  // =============================================================================

  .progress.progress-rounded {
    border-radius: $ax-radius-base;
    
    .progress-bar {
      border-radius: $ax-radius-base;
    }
  }

  .progress.progress-flat {
    border-radius: 0;
    border: none;
    
    .progress-bar {
      border-radius: 0;
    }
  }

  // =============================================================================
  // STEP PROGRESS
  // =============================================================================
  
  .step-progress {
    @include ax-flex-between;
    margin: ax-spacing(4) 0;
    
    .step {
      @include ax-flex-column-center;
      position: relative;
      flex: 1;
      
      &:not(:last-child)::after {
        content: '';
        position: absolute;
        top: ax-spacing(2);
        left: 50%;
        width: 100%;
        height: 2px;
        background-color: $ax-gray-light;
        z-index: 1;
      }
      
      .step-icon {
        width: ax-spacing(8);
        height: ax-spacing(8);
        border-radius: 50%;
        background-color: $ax-gray-light;
        border: 2px solid $ax-gray-light;
        @include ax-flex-center;
        font-weight: $ax-font-bold;
        color: $ax-gray;
        z-index: 2;
        position: relative;
        transition: all $ax-transition-base;
      }
      
      .step-label {
        margin-top: ax-spacing(2);
        font-size: $ax-text-sm;
        text-align: center;
        color: $ax-gray;
        transition: color $ax-transition-base;
      }
      
      // Active step
      &.active {
        .step-icon {
          background-color: $ax-blue;
          border-color: $ax-blue;
          color: $ax-white;
        }
        
        .step-label {
          color: $ax-blue;
          font-weight: $ax-font-medium;
        }
      }
      
      // Completed step
      &.completed {
        .step-icon {
          background-color: $ax-green;
          border-color: $ax-green;
          color: $ax-white;
        }
        
        .step-label {
          color: $ax-green;
        }
        
        &::after {
          background-color: $ax-green;
        }
      }
    }
  }

  // =============================================================================
  // CIRCULAR PROGRESS
  // =============================================================================
  
  .progress-circle {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    
    svg {
      transform: rotate(-90deg);
      
      circle {
        fill: none;
        stroke-width: 8;
        stroke-linecap: round;
        
        &.progress-bg {
          stroke: $ax-gray-light;
        }
        
        &.progress-bar {
          stroke: $ax-blue;
          stroke-dasharray: 283;
          stroke-dashoffset: 283;
          transition: stroke-dashoffset $ax-transition-base;
        }
      }
    }
    
    .progress-text {
      position: absolute;
      font-weight: $ax-font-bold;
      color: $ax-gray-dark;
    }
    
    // Size variants for circular progress
    &.progress-sm {
      width: 60px;
      height: 60px;
      
      svg circle {
        stroke-width: 6;
      }
      
      .progress-text {
        font-size: $ax-text-sm;
      }
    }
    
    &.progress-lg {
      width: 120px;
      height: 120px;
      
      svg circle {
        stroke-width: 10;
      }
      
      .progress-text {
        font-size: $ax-text-lg;
      }
    }
  }

  // =============================================================================
  // ANIMATIONS
  // =============================================================================
  
  @keyframes shine {
    0% {
      left: -100%;
    }
    100% {
      left: 100%;
    }
  }
  
  @keyframes progress-stripes {
    0% {
      background-position: ax-spacing(4) 0;
    }
    100% {
      background-position: 0 0;
    }
  }

  // =============================================================================
  // RESPONSIVE BEHAVIOR
  // =============================================================================
  
  @include ax-responsive(sm-down) {
    .progress-with-label .progress-info {
      flex-direction: column;
      align-items: flex-start;
      gap: ax-spacing(1);
    }
    
    .step-progress {
      .step .step-label {
        font-size: $ax-text-xs;
      }
    }
  }
}